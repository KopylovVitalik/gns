(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["edit"],{5259:function(t,e,i){"use strict";i("fbe0")},"550a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{staticClass:"md-layout md-alignment-top-center todo-form",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submitTodo.apply(null,arguments)}}},[i("md-card",{staticClass:"md-layout-item md-size-50 md-small-size-100"},[i("md-card-content",[i("md-field",[i("label",{attrs:{for:"title"}},[t._v("ToDo Title")]),i("md-input",{attrs:{name:"title",id:"title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),i("md-field",{ref:"canvas_wrapper"},[i("CanvasEditor",{attrs:{initialCanvas:t.canvasData.data},on:{saveCanvas:t.saveCanvas}})],1)],1),i("md-card-actions",[i("md-button",{staticClass:"md-primary",attrs:{type:"submit"},domProps:{textContent:t._s(t.btnText)}})],1)],1)],1)},n=[],s=(i("7db0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"canvas-editor"},[i("div",{staticClass:"canvas-editor__controls"},[i("div",{staticClass:"canvas-editor__control"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.penWidth,expression:"penWidth",modifiers:{number:!0}}],attrs:{type:"range",min:"2",max:"20"},domProps:{value:t.penWidth},on:{__r:function(e){t.penWidth=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),t._v(t._s(t.penWidth)+" px ")]),i("div",{staticClass:"canvas-editor__control"},[i("md-radio",{attrs:{value:"pen"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("Pen")]),i("md-radio",{attrs:{value:"eraser"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("Eraser")])],1),i("div",{staticClass:"canvas-editor__control"},[i("div",{staticClass:"color-picker"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.color,expression:"color"}],attrs:{type:"color",id:"color",name:"head"},domProps:{value:t.color},on:{input:function(e){e.target.composing||(t.color=e.target.value)}}}),i("label",{attrs:{for:"color"}},[t._v("Choose color")])])]),i("div",{staticClass:"canvas-editor__control"},[i("md-button",{staticClass:"md-raised",on:{click:t.clearCanvas}},[t._v("Clear Canvas")])],1)]),i("div",{ref:"canvasWrapper",staticClass:"canvas-editor__wrapper"},[i("div",{staticClass:"canvas-editor__canvas",style:{width:t.width+"px"}},[i("canvas",{ref:"canvas",on:{mousedown:t.beginDrawing,mousemove:t.keepDrawing,mouseup:t.stopDrawing,touchstart:t.beginDrawing,touchmove:t.mobileDrawing,touchend:t.stopDrawing}})])])])}),o=[],r={props:["initialCanvas"],data:function(){return{x:0,y:0,isDrawing:!1,canvas:null,width:0,height:0,penWidth:3,type:"pen",color:"red"}},methods:{drawLine:function(t,e,i,a){var n=this.canvas.getContext("2d");n.beginPath(),n.strokeStyle=this.computedColor,n.lineWidth=this.penWidth,n.lineCap="round",n.moveTo(t,e),n.lineTo(i,a),n.stroke(),n.closePath()},beginDrawing:function(t){this.x=t.offsetX,this.y=t.offsetY,this.isDrawing=!0},keepDrawing:function(t){t.preventDefault(),t.stopPropagation(),!0===this.isDrawing&&(this.drawLine(this.x,this.y,t.offsetX,t.offsetY),this.x=t.offsetX,this.y=t.offsetY)},mobileDrawing:function(t){var e=t.touches[0],i=new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY});this.keepDrawing(i)},stopDrawing:function(t){!0===this.isDrawing&&(this.drawLine(this.x,this.y,t.offsetX,t.offsetY),this.x=0,this.y=0,this.isDrawing=!1,this.saveCanvas())},saveCanvas:function(){var t=this.canvas.toDataURL(),e=this.canvasWidth,i=.4*this.canvasWidth;this.$emit("saveCanvas",{data:t,height:i,width:e})},clearCanvas:function(){this.canvas.getContext("2d").clearRect(0,0,this.width,this.height),this.saveCanvas()},resizeCanvas:function(){this.width=this.$refs.canvasWrapper.offsetWidth,this.height=.8*this.width,this.canvas.width=this.width,this.canvas.height=this.height}},computed:{computedColor:function(){return"pen"===this.type?this.color:"#FFF"}},mounted:function(){var t=this;window.addEventListener("resize",this.resizeCanvas),this.$nextTick((function(){t.$nextTick((function(){if(t.canvas=t.$refs.canvas,t.resizeCanvas(),t.initialCanvas){var e=new Image;e.setAttribute("src",t.initialCanvas),e.addEventListener("load",(function(){t.canvas.getContext("2d").drawImage(e,0,0)}))}}))}))},destroyed:function(){window.removeEventListener("resize",this.resizeCanvas)}},c=r,d=(i("a8f5"),i("2877")),l=Object(d["a"])(c,s,o,!1,null,null,null),u=l.exports,v={components:{CanvasEditor:u},props:{actionType:{type:String},btnText:{type:String},id:{type:String,default:null}},name:"TodoForm",data:function(){return{title:"",canvasData:{data:"",height:0,width:0}}},mounted:function(){var t=this;if(this.id){var e=this.$store.state.todos.find((function(e){return+e.id===+t.id}));if(!e)return void this.$router.push("/todo/add");this.title=e.title?e.title:"",this.canvasData=e.content?JSON.parse(e.content):null}},methods:{submitTodo:function(){this.$store.dispatch(this.actionType,{title:this.title,content:JSON.stringify(this.canvasData),id:this.id}),this.$router.push("/")},saveCanvas:function(t){this.canvasData=t}}},h=v,p=(i("5259"),Object(d["a"])(h,a,n,!1,null,null,null));e["a"]=p.exports},"8c01":function(t,e,i){},a8f5:function(t,e,i){"use strict";i("8c01")},ae6e:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",{staticClass:"app-title"},[t._v("Edit Todo")]),i("TodoForm",{attrs:{actionType:"updateTodo",id:t.id,btnText:"Edit Todo"}})],1)},n=[],s=i("550a"),o={components:{TodoForm:s["a"]},computed:{id:function(){return this.$route.params.id}}},r=o,c=i("2877"),d=Object(c["a"])(r,a,n,!1,null,null,null);e["default"]=d.exports},fbe0:function(t,e,i){}}]);
//# sourceMappingURL=edit.e00ff01b.js.map