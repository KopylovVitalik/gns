(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["add"],{5259:function(t,e,a){"use strict";a("fbe0")},"550a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"md-layout md-alignment-top-center todo-form",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submitTodo.apply(null,arguments)}}},[a("md-card",{staticClass:"md-layout-item md-size-50 md-small-size-100"},[a("md-card-content",[a("md-field",[a("label",{attrs:{for:"title"}},[t._v("ToDo Title")]),a("md-input",{attrs:{name:"title",id:"title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("md-field",{ref:"canvas_wrapper"},[a("CanvasEditor",{attrs:{initialCanvas:t.canvasData.data},on:{saveCanvas:t.saveCanvas}})],1)],1),a("md-card-actions",[a("md-button",{staticClass:"md-primary",attrs:{type:"submit"},domProps:{textContent:t._s(t.btnText)}})],1)],1)],1)},n=[],s=(a("7db0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"canvas-editor"},[a("div",{staticClass:"canvas-editor__controls"},[a("div",{staticClass:"canvas-editor__control"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.penWidth,expression:"penWidth",modifiers:{number:!0}}],attrs:{type:"range",min:"2",max:"20"},domProps:{value:t.penWidth},on:{__r:function(e){t.penWidth=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}}),t._v(t._s(t.penWidth)+" px ")]),a("div",{staticClass:"canvas-editor__control"},[a("md-radio",{attrs:{value:"pen"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("Pen")]),a("md-radio",{attrs:{value:"eraser"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("Eraser")])],1),a("div",{staticClass:"canvas-editor__control"},[a("div",{staticClass:"color-picker"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.color,expression:"color"}],attrs:{type:"color",id:"color",name:"head"},domProps:{value:t.color},on:{input:function(e){e.target.composing||(t.color=e.target.value)}}}),a("label",{attrs:{for:"color"}},[t._v("Choose color")])])]),a("div",{staticClass:"canvas-editor__control"},[a("md-button",{staticClass:"md-raised",on:{click:t.clearCanvas}},[t._v("Clear Canvas")])],1)]),a("div",{ref:"canvasWrapper",staticClass:"canvas-editor__wrapper"},[a("div",{staticClass:"canvas-editor__canvas",style:{width:t.width+"px"}},[a("canvas",{ref:"canvas",on:{mousedown:t.beginDrawing,mousemove:t.keepDrawing,mouseup:t.stopDrawing,touchstart:t.beginDrawing,touchmove:t.mobileDrawing,touchend:t.stopDrawing}})])])])}),o=[],r={props:["initialCanvas"],data:function(){return{x:0,y:0,isDrawing:!1,canvas:null,width:0,height:0,penWidth:3,type:"pen",color:"red"}},methods:{drawLine:function(t,e,a,i){var n=this.canvas.getContext("2d");n.beginPath(),n.strokeStyle=this.computedColor,n.lineWidth=this.penWidth,n.lineCap="round",n.moveTo(t,e),n.lineTo(a,i),n.stroke(),n.closePath()},beginDrawing:function(t){this.x=t.offsetX,this.y=t.offsetY,this.isDrawing=!0},keepDrawing:function(t){t.preventDefault(),t.stopPropagation(),!0===this.isDrawing&&(this.drawLine(this.x,this.y,t.offsetX,t.offsetY),this.x=t.offsetX,this.y=t.offsetY)},mobileDrawing:function(t){var e=t.touches[0],a=new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY});this.keepDrawing(a)},stopDrawing:function(t){!0===this.isDrawing&&(this.drawLine(this.x,this.y,t.offsetX,t.offsetY),this.x=0,this.y=0,this.isDrawing=!1,this.saveCanvas())},saveCanvas:function(){var t=this.canvas.toDataURL(),e=this.canvasWidth,a=.4*this.canvasWidth;this.$emit("saveCanvas",{data:t,height:a,width:e})},clearCanvas:function(){this.canvas.getContext("2d").clearRect(0,0,this.width,this.height),this.saveCanvas()},resizeCanvas:function(){this.width=this.$refs.canvasWrapper.offsetWidth,this.height=.8*this.width,this.canvas.width=this.width,this.canvas.height=this.height}},computed:{computedColor:function(){return"pen"===this.type?this.color:"#FFF"}},mounted:function(){var t=this;window.addEventListener("resize",this.resizeCanvas),this.$nextTick((function(){t.$nextTick((function(){if(t.canvas=t.$refs.canvas,t.resizeCanvas(),t.initialCanvas){var e=new Image;e.setAttribute("src",t.initialCanvas),e.addEventListener("load",(function(){t.canvas.getContext("2d").drawImage(e,0,0)}))}}))}))},destroyed:function(){window.removeEventListener("resize",this.resizeCanvas)}},c=r,d=(a("a8f5"),a("2877")),l=Object(d["a"])(c,s,o,!1,null,null,null),u=l.exports,v={components:{CanvasEditor:u},props:{actionType:{type:String},btnText:{type:String},id:{type:String,default:null}},name:"TodoForm",data:function(){return{title:"",canvasData:{data:"",height:0,width:0}}},mounted:function(){var t=this;if(this.id){var e=this.$store.state.todos.find((function(e){return+e.id===+t.id}));if(!e)return void this.$router.push("/todo/add");this.title=e.title?e.title:"",this.canvasData=e.content?JSON.parse(e.content):null}},methods:{submitTodo:function(){this.$store.dispatch(this.actionType,{title:this.title,content:JSON.stringify(this.canvasData),id:this.id}),this.$router.push("/")},saveCanvas:function(t){this.canvasData=t}}},h=v,p=(a("5259"),Object(d["a"])(h,i,n,!1,null,null,null));e["a"]=p.exports},"8c01":function(t,e,a){},"8d69":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticClass:"app-title"},[t._v("Edd Todo")]),a("TodoForm",{attrs:{actionType:"addTodo",btnText:"Add Todo"}})],1)},n=[],s=a("550a"),o={components:{TodoForm:s["a"]}},r=o,c=a("2877"),d=Object(c["a"])(r,i,n,!1,null,null,null);e["default"]=d.exports},a8f5:function(t,e,a){"use strict";a("8c01")},fbe0:function(t,e,a){}}]);
//# sourceMappingURL=add.78b95889.js.map